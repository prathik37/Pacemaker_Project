<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.
broadcast chan ASense, VSense, APace, VPace;
clock globalClock;</declaration><template><name x="5" y="5">Heart</name><parameter>const int  &amp;minwait_A, const int &amp;minwait_V</parameter><declaration>// Place local declarations here.
clock x;</declaration><location id="id0" x="264" y="0"></location><init ref="id0"/><transition><source ref="id0"/><target ref="id0"/><label kind="guard" x="16" y="-48">x &gt;= minwait_A</label><label kind="synchronisation" x="48" y="-32">ASense!</label><label kind="assignment" x="72" y="-16">x:=0</label><nail x="112" y="-112"/><nail x="120" y="72"/></transition><transition><source ref="id0"/><target ref="id0"/><label kind="guard" x="224" y="-160">x &gt;= minwait_V</label><label kind="synchronisation" x="240" y="-136">VSense!</label><label kind="assignment" x="248" y="-120">x:=0</label><nail x="400" y="-136"/><nail x="144" y="-136"/></transition><transition><source ref="id0"/><target ref="id0"/><label kind="synchronisation" x="448" y="-32">VPace?</label><label kind="assignment" x="456" y="-16">x:=0</label><nail x="440" y="80"/><nail x="440" y="-112"/></transition><transition><source ref="id0"/><target ref="id0"/><label kind="synchronisation" x="256" y="112">APace?</label><label kind="assignment" x="264" y="136">x:=0</label><nail x="168" y="136"/><nail x="408" y="136"/></transition></template><template><name>Monitor</name><declaration>clock amClock;
clock vmClock;
int amTime;
int vmTime;
const int mLRI = 1000;
const int mAVI = 250;
const int mPVARP = 300;
const int mVRP = 200;</declaration><location id="id1" x="-184" y="0"><name x="-248" y="-8">VPaced</name><committed/></location><location id="id2" x="208" y="-16"><name x="198" y="-46">VSensed</name><committed/></location><location id="id3" x="40" y="192"><name x="24" y="208">APaced</name><committed/></location><location id="id4" x="-8" y="-168"><name x="-18" y="-198">ASensed</name><committed/></location><location id="id5" x="16" y="-8"></location><init ref="id5"/><transition><source ref="id5"/><target ref="id3"/><label kind="synchronisation" x="112" y="128">APace?</label><nail x="120" y="96"/></transition><transition><source ref="id3"/><target ref="id5"/><label kind="assignment" x="-32" y="92">amClock := 0</label><nail x="-56" y="120"/></transition><transition><source ref="id2"/><target ref="id5"/><label kind="assignment" x="96" y="0">vmClock :=0</label><nail x="144" y="56"/></transition><transition><source ref="id5"/><target ref="id2"/><label kind="synchronisation" x="52" y="-27">VSense?</label><nail x="120" y="-48"/></transition><transition><source ref="id5"/><target ref="id4"/><label kind="synchronisation" x="-120" y="-128">ASense?</label><nail x="-88" y="-72"/></transition><transition><source ref="id4"/><target ref="id5"/><label kind="assignment" x="-32" y="-104">amClock := 0</label><nail x="80" y="-104"/></transition><transition><source ref="id5"/><target ref="id1"/><label kind="synchronisation" x="-152" y="48">VPace?</label><nail x="-72" y="56"/></transition><transition><source ref="id1"/><target ref="id5"/><label kind="assignment" x="-136" y="-40">vmClock:=0</label><nail x="-120" y="-56"/></transition></template><template><name x="5" y="5">Pacemaker</name><declaration>// Place local declarations here.

clock a_clk,v_clk;
int asenseig;

const int LRI = 1000;
const int AVI = 150;
const int PVARP = 300;
const int VRP = 200;
const int SYN = 250;</declaration><location id="id6" x="-96" y="-208"><name x="-120" y="-240">ASenseIgnoredS1a</name><committed/></location><location id="id7" x="-240" y="-200"><name x="-320" y="-232">VSenseIgnoredS1a</name><committed/></location><location id="id8" x="-168" y="-112"><name x="-184" y="-96">S1a</name><label kind="invariant" x="-152" y="-104">v_clk&lt;=VRP</label></location><location id="id9" x="152" y="-208"><name x="32" y="-240">ASenseIgnoredS2</name><committed/></location><location id="id10" x="-384" y="8"><name x="-440" y="24">ASenseIgnoredS1</name><committed/></location><location id="id11" x="256" y="-120"><name x="246" y="-150">S3</name><label kind="invariant" x="246" y="-105">v_clk &lt;= LRI-AVI</label></location><location id="id12" x="-600" y="40"><committed/></location><location id="id13" x="8" y="-112"><name x="-2" y="-142">S2</name><label kind="invariant" x="8" y="-96">v_clk&lt;=PVARP</label></location><location id="id14" x="-336" y="-112"><name x="-360" y="-144">S1</name><label kind="invariant" x="-440" y="-136">a_clk&lt;=AVI</label></location><location id="id15" x="-672" y="-112"><label kind="invariant" x="-720" y="-144">a_clk &lt;= SYN</label></location><init ref="id15"/><transition><source ref="id14"/><target ref="id8"/><label kind="synchronisation" x="-200" y="-48">VSense?</label><label kind="assignment" x="-272" y="-48">v_clk := 0</label><nail x="-248" y="-56"/><nail x="-168" y="-56"/></transition><transition><source ref="id11"/><target ref="id8"/><label kind="synchronisation" x="120" y="-304">VSense?</label><label kind="assignment" x="136" y="-288">v_clk := 0</label><nail x="104" y="-296"/><nail x="-144" y="-256"/></transition><transition><source ref="id13"/><target ref="id8"/><label kind="synchronisation" x="-136" y="-320">VSense?</label><label kind="assignment" x="-80" y="-320">v_clk := 0</label><nail x="24" y="-296"/><nail x="-176" y="-296"/></transition><transition><source ref="id6"/><target ref="id8"/><nail x="-152" y="-192"/></transition><transition><source ref="id8"/><target ref="id6"/><label kind="synchronisation" x="-120" y="-152">ASense?</label><nail x="-96" y="-168"/></transition><transition><source ref="id8"/><target ref="id13"/><label kind="guard" x="-128" y="-136">v_clk &gt;= VRP</label></transition><transition><source ref="id7"/><target ref="id8"/><nail x="-216" y="-168"/></transition><transition><source ref="id8"/><target ref="id7"/><label kind="synchronisation" x="-208" y="-208">VSense?</label><nail x="-192" y="-184"/></transition><transition><source ref="id14"/><target ref="id8"/><label kind="guard" x="-304" y="-152">a_clk &gt;= AVI</label><label kind="synchronisation" x="-280" y="-128">VPace!</label><label kind="assignment" x="-272" y="-104">v_clk := 0</label></transition><transition><source ref="id9"/><target ref="id13"/><nail x="112" y="-216"/></transition><transition><source ref="id13"/><target ref="id9"/><label kind="synchronisation" x="136" y="-160">ASense?</label><nail x="136" y="-152"/></transition><transition><source ref="id10"/><target ref="id14"/><nail x="-344" y="0"/></transition><transition><source ref="id14"/><target ref="id10"/><label kind="synchronisation" x="-420" y="-67">ASense?</label><nail x="-416" y="-8"/></transition><transition><source ref="id12"/><target ref="id14"/><label kind="synchronisation" x="-528" y="-51">APace!</label><label kind="assignment" x="-584" y="-32">a_clk := 0</label></transition><transition><source ref="id15"/><target ref="id14"/><label kind="synchronisation" x="-564" y="-127">ASense?</label><label kind="assignment" x="-564" y="-112">a_clk := 0</label></transition><transition><source ref="id11"/><target ref="id14"/><label kind="synchronisation" x="32" y="32">ASense?</label><label kind="assignment" x="96" y="24">a_clk := 0</label><nail x="216" y="32"/><nail x="64" y="64"/><nail x="-184" y="72"/><nail x="-272" y="64"/></transition><transition><source ref="id11"/><target ref="id14"/><label kind="guard" x="0" y="-392">v_clk &gt;= LRI-AVI</label><label kind="synchronisation" x="80" y="-376">APace!</label><label kind="assignment" x="56" y="-344">a_clk := 0</label><nail x="224" y="-344"/><nail x="-216" y="-368"/><nail x="-328" y="-344"/></transition><transition><source ref="id13"/><target ref="id11"/><label kind="guard" x="72" y="-146">v_clk &gt;= PVARP</label></transition><transition><source ref="id15"/><target ref="id12"/><label kind="guard" x="-720" y="-48">a_clk&gt;=SYN</label></transition></template><system>// Place template instantiations here.
Heart_Process = Heart(2000, 100);
Pacemaker_Process = Pacemaker();
Monitor_Process = Monitor();
// List one or more processes to be composed into a system.
system Heart_Process, Monitor_Process, Pacemaker_Process ;</system></nta>